/**
* easyModal.js v1.3.2
* A minimal jQuery modal that works with your CSS.
* Author: Flavius Matis - http://flaviusmatis.github.com/
* URL: https://github.com/flaviusmatis/easyModal.js
*
* Copyright 2012, Flavius Matis
* Released under the MIT license.
* http://flaviusmatis.github.com/license.html
*/

/*jslint browser: true*/
/*global jQuery*/
!function(n,t){jQuery.fn[t]=function(n){return n?this.bind("resize",(e=n,function(){var n=this,t=arguments;a?clearTimeout(a):i&&e.apply(n,t),a=setTimeout(function(){i||e.apply(n,t),a=null},o||100)})):this.trigger(t);var e,o,i,a}}(jQuery,"smartModalResize"),function(n){"use strict";var t=null,e={init:function(e){var o={top:"auto",left:"auto",autoOpen:!1,overlayOpacity:.5,overlayColor:"#000",overlayClose:!0,overlayParent:"body",closeOnEscape:!0,closeButtonClass:".close",transitionIn:"",transitionOut:"",onOpen:!1,onClose:!1,zIndex:function(){return function(){if(t)return++t;var e=Math.max.apply(null,n.map(n("body *"),function(t,e){if("static"!=n(t).css("position"))return parseInt(n(t).css("z-index"))||1}));return t=e,e}()},updateZIndexOnOpen:!0,hasVariableWidth:!1};return e=n.extend(o,e),this.each(function(){var t=e,o=n('<div class="lean-overlay"></div>'),i=n(this);o.css({display:"none",position:"fixed","z-index":t.updateZIndexOnOpen?0:t.zIndex(),top:0,left:0,height:"100%",width:"100%",background:t.overlayColor,opacity:t.overlayOpacity,overflow:"auto"}).appendTo(t.overlayParent),i.css({display:"none",position:"fixed","z-index":t.updateZIndexOnOpen?0:t.zIndex()+1,left:parseInt(t.left,10)>-1?t.left+"px":"50%",top:parseInt(t.top,10)>-1?t.top+"px":"50%"}),i.bind("openModal",function(){var n=t.updateZIndexOnOpen?t.zIndex():parseInt(o.css("z-index"),10),e=n+1;""!==t.transitionIn&&""!==t.transitionOut&&i.removeClass(t.transitionOut).addClass(t.transitionIn),i.css({display:"block","margin-left":(parseInt(t.left,10)>-1?0:-i.outerWidth()/2)+"px","margin-top":(parseInt(t.top,10)>-1?0:-i.outerHeight()/2)+"px","z-index":e}),o.css({"z-index":n,display:"block"}),t.onOpen&&"function"==typeof t.onOpen&&t.onOpen(i[0])}),i.bind("closeModal",function(){""!==t.transitionIn&&""!==t.transitionOut?(i.removeClass(t.transitionIn).addClass(t.transitionOut),i.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.css("display","none"),o.css("display","none")})):(i.css("display","none"),o.css("display","none")),t.onClose&&"function"==typeof t.onClose&&t.onClose(i[0])}),o.click(function(){t.overlayClose&&i.trigger("closeModal")}),n(document).keydown(function(n){t.closeOnEscape&&27===n.keyCode&&i.trigger("closeModal")}),n(window).smartModalResize(function(){t.hasVariableWidth&&i.css({"margin-left":(parseInt(t.left,10)>-1?0:-i.outerWidth()/2)+"px","margin-top":(parseInt(t.top,10)>-1?0:-i.outerHeight()/2)+"px"})}),i.on("click",t.closeButtonClass,function(n){i.trigger("closeModal"),n.preventDefault()}),t.autoOpen&&i.trigger("openModal")})}};n.fn.easyModal=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void n.error("Method "+t+" does not exist on jQuery.easyModal"):e.init.apply(this,arguments)}}(jQuery);
